using System;
using System.IO;
using UnityEditor;
using UnityEngine;

namespace GreatClock.Common.UI {

	public static class GreatArtTextFontAssetGenerator {

		private const string CODE = "Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLy8gICAgR2VuZXJhdGVkIGJ5IEdyZWF0QXJ0VGV4dC4NCi8vICAgIExvY2F0ZSB0aGlzIGZpbGUgdG8gYW55d2hlcmUgdGhhdCBzdWl0cyB5b3VyIHByb2plY3QuDQovLyAgICBZb3UgY2FuIGFsc28gbWFrZSBHcmVhdEFydFRleHQgc3VwcG9ydCBhbm90aGVyIGZvbnQgc29sdXRpb24NCi8vICAgICAgYnkgY3JlYXRpbmcgYSBuZXcgY29kZSBsaWtlIHRoaXMuKE5vdCByZWNvbW1hbmRlZCkNCi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBUTVBybzsNCnVzaW5nIFVuaXR5RW5naW5lOw0KdXNpbmcgVW5pdHlFbmdpbmUuUmVuZGVyaW5nOw0KdXNpbmcgVW5pdHlFbmdpbmUuVGV4dENvcmU7DQoNCm5hbWVzcGFjZSBHcmVhdENsb2NrLkNvbW1vbi5VSSB7DQoNCglbQ3JlYXRlQXNzZXRNZW51KG1lbnVOYW1lID0gIkdyZWF0QXJ0VGV4dC9OZXcgQXNzZXQgZm9yIFRNUF9Gb250QXNzZXQiLCBvcmRlciA9IDUwMCldDQoJcHVibGljIGNsYXNzIFRNUEZvbnRBc3NldEZvckdyZWF0QXJ0VGV4dCA6IEJhc2VGb250QXNzZXQgew0KDQoJCVtTZXJpYWxpemVGaWVsZF0NCgkJcHJpdmF0ZSBUTVBfRm9udEFzc2V0IG1fRm9udDsNCg0KCQlwcml2YXRlIFJlbmRlclRleHR1cmUgbV9UZXh0dXJlOw0KDQoJCXB1YmxpYyBvdmVycmlkZSBUZXh0dXJlIHRleHR1cmUgew0KCQkJZ2V0IHsNCgkJCQlpZiAobURpcnR5KSB7DQoJCQkJCUdlbmVyYXRlVGV4dHVyZSgpOw0KCQkJCQltRGlydHkgPSBmYWxzZTsNCgkJCQl9DQoJCQkJcmV0dXJuIG1fVGV4dHVyZTsNCgkJCX0NCgkJfQ0KDQoJCXB1YmxpYyBvdmVycmlkZSBib29sIEdldENoYXJhY3RlckluZm8oY2hhciBjaHIsIG91dCBDaGFyYWN0ZXJJbmZvIGluZm8sIGludCBzaXplLCBGb250U3R5bGUgc3R5bGUpIHsNCgkJCWlmIChtRGlydHkpIHsNCgkJCQlHZW5lcmF0ZVRleHR1cmUoKTsNCgkJCQltRGlydHkgPSBmYWxzZTsNCgkJCX0NCgkJCUNoYXJhY3RlckRhdGEgZGF0YTsNCgkJCWlmICghbVJlcXVlc3RlZENoYXJhY3RlcnMuVHJ5R2V0VmFsdWUoQ2hhcmFjdGVyRGF0YS5HZXRLZXkoY2hyLCBzaXplLCBzdHlsZSksIG91dCBkYXRhKSkgew0KCQkJCWluZm8gPSBkZWZhdWx0KENoYXJhY3RlckluZm8pOw0KCQkJCXJldHVybiBmYWxzZTsNCgkJCX0NCgkJCWluZm8gPSBkYXRhLmluZm87DQoJCQlyZXR1cm4gZGF0YS5zdWNjZXNzOw0KCQl9DQoNCgkJcHVibGljIG92ZXJyaWRlIHZvaWQgUmVxdWVzdENoYXJhY3RlcnNJblRleHR1cmUoc3RyaW5nIGNoYXJhY3RlcnMsIGludCBzaXplLCBGb250U3R5bGUgc3R5bGUpIHsNCgkJCWJvb2wgY2hhbmdlZCA9IGZhbHNlOw0KCQkJZm9yZWFjaCAoY2hhciBjaHIgaW4gY2hhcmFjdGVycykgew0KCQkJCXN0cmluZyBrZXkgPSBDaGFyYWN0ZXJEYXRhLkdldEtleShjaHIsIHNpemUsIHN0eWxlKTsNCgkJCQlpZiAoIW1SZXF1ZXN0ZWRDaGFyYWN0ZXJzLlRyeUdldFZhbHVlKGtleSwgb3V0IENoYXJhY3RlckRhdGEgZGF0YSkpIHsNCgkJCQkJbVJlcXVlc3RlZENoYXJhY3RlcnMuQWRkKGtleSwgQ2hhcmFjdGVyRGF0YS5HZXQoY2hyLCBzaXplLCBzdHlsZSkpOw0KCQkJCQljaGFuZ2VkID0gdHJ1ZTsNCgkJCQl9DQoJCQl9DQoJCQlpZiAoY2hhbmdlZCkgeyBtRGlydHkgPSB0cnVlOyB9DQoJCX0NCg0KCQlwdWJsaWMgb3ZlcnJpZGUgdm9pZCBSZXNldCgpIHsNCgkJCW1SZXF1ZXN0ZWRDaGFyYWN0ZXJzLkNsZWFyKCk7DQoJCQlpZiAobV9UZXh0dXJlICE9IG51bGwpIHsNCgkJCQlSZW5kZXJUZXh0dXJlLlJlbGVhc2VUZW1wb3JhcnkobV9UZXh0dXJlKTsNCgkJCX0NCgkJCW1fVGV4dHVyZSA9IG51bGw7DQoJCQltRGlydHkgPSBmYWxzZTsNCgkJfQ0KDQoJCXByaXZhdGUgYm9vbCBtRGlydHkgPSBmYWxzZTsNCgkJcHJpdmF0ZSBEaWN0aW9uYXJ5PHN0cmluZywgQ2hhcmFjdGVyRGF0YT4gbVJlcXVlc3RlZENoYXJhY3RlcnMgPSBuZXcgRGljdGlvbmFyeTxzdHJpbmcsIENoYXJhY3RlckRhdGE+KDEyOCk7DQoNCgkJcHJpdmF0ZSBjbGFzcyBDaGFyYWN0ZXJEYXRhIHsNCgkJCXB1YmxpYyBjaGFyIGNoYXJhY3RlciB7IGdldDsgcHJpdmF0ZSBzZXQ7IH0NCgkJCXB1YmxpYyBpbnQgc2l6ZSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH0NCgkJCXB1YmxpYyBGb250U3R5bGUgc3R5bGUgeyBnZXQ7IHByaXZhdGUgc2V0OyB9DQoJCQlwdWJsaWMgc3RyaW5nIGtleSB7IGdldDsgcHJpdmF0ZSBzZXQ7IH0NCgkJCXB1YmxpYyBib29sIHN1Y2Nlc3M7DQoJCQlwdWJsaWMgQ2hhcmFjdGVySW5mbyBpbmZvOw0KCQkJcHJpdmF0ZSBDaGFyYWN0ZXJEYXRhKCkgeyB9DQoJCQlwcml2YXRlIHN0YXRpYyBRdWV1ZTxDaGFyYWN0ZXJEYXRhPiBzX2NhY2hlZCA9IG5ldyBRdWV1ZTxDaGFyYWN0ZXJEYXRhPigpOw0KCQkJcHVibGljIHN0YXRpYyBDaGFyYWN0ZXJEYXRhIEdldChjaGFyIGNociwgaW50IHNpemUsIEZvbnRTdHlsZSBzdHlsZSkgew0KCQkJCUNoYXJhY3RlckRhdGEgcmV0ID0gbnVsbDsNCgkJCQlpZiAoc19jYWNoZWQuQ291bnQgPiAwKSB7IHJldCA9IHNfY2FjaGVkLkRlcXVldWUoKTsgfQ0KCQkJCWlmIChyZXQgPT0gbnVsbCkgeyByZXQgPSBuZXcgQ2hhcmFjdGVyRGF0YSgpOyB9DQoJCQkJcmV0LmNoYXJhY3RlciA9IGNocjsNCgkJCQlyZXQuc2l6ZSA9IHNpemU7DQoJCQkJcmV0LnN0eWxlID0gc3R5bGU7DQoJCQkJcmV0LmtleSA9IEdldEtleShjaHIsIHNpemUsIHN0eWxlKTsNCgkJCQlyZXR1cm4gcmV0Ow0KCQkJfQ0KCQkJcHVibGljIHN0YXRpYyBib29sIENhY2hlKENoYXJhY3RlckRhdGEgZGF0YSkgew0KCQkJCWlmIChkYXRhID09IG51bGwpIHsgcmV0dXJuIGZhbHNlOyB9DQojaWYgVU5JVFlfRURJVE9SDQoJCQkJaWYgKHNfY2FjaGVkLkNvbnRhaW5zKGRhdGEpKSB7IHJldHVybiBmYWxzZTsgfQ0KI2VuZGlmDQoJCQkJc19jYWNoZWQuRW5xdWV1ZShkYXRhKTsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJCXB1YmxpYyBzdGF0aWMgc3RyaW5nIEdldEtleShjaGFyIGNociwgaW50IHNpemUsIEZvbnRTdHlsZSBzdHlsZSkgew0KCQkJCXJldHVybiAkIntjaHJ9fHtzaXplfXx7c3R5bGV9IjsNCgkJCX0NCgkJfQ0KDQoJCXByaXZhdGUgc3RhdGljIExpc3Q8VmVjdG9yMz4gc192ZXJ0cyA9IG5ldyBMaXN0PFZlY3RvcjM+KDI1Nik7DQoJCXByaXZhdGUgc3RhdGljIExpc3Q8VmVjdG9yMj4gc191djFzID0gbmV3IExpc3Q8VmVjdG9yMj4oMjU2KTsNCgkJcHJpdmF0ZSBzdGF0aWMgTGlzdDxWZWN0b3IyPiBzX3V2MnMgPSBuZXcgTGlzdDxWZWN0b3IyPigyNTYpOw0KCQlwcml2YXRlIHN0YXRpYyBMaXN0PENvbG9yPiBzX2NvbG9ycyA9IG5ldyBMaXN0PENvbG9yPigyNTYpOw0KCQlwcml2YXRlIHN0YXRpYyBMaXN0PExpc3Q8aW50Pj4gc190cmlhbmdsZXMgPSBuZXcgTGlzdDxMaXN0PGludD4+KCk7DQoJCXByaXZhdGUgc3RhdGljIE1lc2ggc19tZXNoOw0KDQoJCXByaXZhdGUgc3RhdGljIExpc3Q8VmVjdG9yMj4gc190ZW1wX2F0bGFzX3NpemUgPSBuZXcgTGlzdDxWZWN0b3IyPigpOw0KDQoJCXByaXZhdGUgc3RhdGljIExpc3Q8TWF0ZXJpYWxQcm9wZXJ0eUJsb2NrPiBzX3Byb3BlcnR5YmxvY2tzID0gbmV3IExpc3Q8TWF0ZXJpYWxQcm9wZXJ0eUJsb2NrPigpOw0KCQlwcml2YXRlIHN0YXRpYyBDb21tYW5kQnVmZmVyIHNfY21kX2J1ZmZlcjsNCg0KCQlwcml2YXRlIGJvb2wgR2VuZXJhdGVUZXh0dXJlKCkgew0KCQkJYm9vbCByZXQgPSB0cnVlOw0KCQkJaW50IHR3ID0gNTEyOw0KCQkJaW50IHRoID0gNTEyOw0KCQkJaWYgKG1fVGV4dHVyZSAhPSBudWxsKSB7DQoJCQkJdHcgPSBtX1RleHR1cmUud2lkdGg7DQoJCQkJdGggPSBtX1RleHR1cmUuaGVpZ2h0Ow0KCQkJfQ0KCQkJc190ZW1wX2F0bGFzX3NpemUuQ2xlYXIoKTsNCgkJCVRleHR1cmUyRFtdIGF0bGFzID0gbV9Gb250LmF0bGFzVGV4dHVyZXM7DQoJCQlmb3IgKGludCBpID0gMDsgaSA8IGF0bGFzLkxlbmd0aDsgaSsrKSB7DQoJCQkJVGV4dHVyZTJEIHRleCA9IGF0bGFzW2ldOw0KCQkJCXNfdGVtcF9hdGxhc19zaXplLkFkZChuZXcgVmVjdG9yMigxZiAvIHRleC53aWR0aCwgMWYgLyB0ZXguaGVpZ2h0KSk7DQoJCQl9DQoJCQl3aGlsZSAodHJ1ZSkgew0KCQkJCWZsb2F0IF90dyA9IDFmIC8gdHc7DQoJCQkJZmxvYXQgX3RoID0gMWYgLyB0aDsNCgkJCQlpbnQgcGFkZGluZyA9IDA7DQoJCQkJaW50IGN4ID0gcGFkZGluZzsNCgkJCQlpbnQgY3kgPSBwYWRkaW5nOw0KCQkJCWludCBsaW5laGVpZ2h0ID0gMDsNCgkJCQlzX3ZlcnRzLkNsZWFyKCk7DQoJCQkJc191djFzLkNsZWFyKCk7DQoJCQkJc191djJzLkNsZWFyKCk7DQoJCQkJc19jb2xvcnMuQ2xlYXIoKTsNCgkJCQlmb3IgKGludCBpID0gc190cmlhbmdsZXMuQ291bnQgLSAxOyBpID49IDA7IGktLSkgew0KCQkJCQlzX3RyaWFuZ2xlc1tpXS5DbGVhcigpOw0KCQkJCX0NCgkJCQlmb3IgKGludCBpID0gc190cmlhbmdsZXMuQ291bnQ7IGkgPCBhdGxhcy5MZW5ndGg7IGkrKykgew0KCQkJCQlzX3RyaWFuZ2xlcy5BZGQobmV3IExpc3Q8aW50PigyNTYpKTsNCgkJCQl9DQoJCQkJZm9yIChpbnQgaSA9IHNfcHJvcGVydHlibG9ja3MuQ291bnQ7IGkgPCBhdGxhcy5MZW5ndGg7IGkrKykgew0KCQkJCQlzX3Byb3BlcnR5YmxvY2tzLkFkZChuZXcgTWF0ZXJpYWxQcm9wZXJ0eUJsb2NrKCkpOw0KCQkJCX0NCgkJCQlmb3JlYWNoIChLZXlWYWx1ZVBhaXI8c3RyaW5nLCBDaGFyYWN0ZXJEYXRhPiBrdiBpbiBtUmVxdWVzdGVkQ2hhcmFjdGVycykgew0KCQkJCQlDaGFyYWN0ZXJEYXRhIGMgPSBrdi5WYWx1ZTsNCgkJCQkJRm9udFN0eWxlcyBzdHlsZXMgPSBGb250U3R5bGVzLk5vcm1hbDsNCgkJCQkJc3dpdGNoIChjLnN0eWxlKSB7DQoJCQkJCQljYXNlIEZvbnRTdHlsZS5Cb2xkOiBzdHlsZXMgfD0gRm9udFN0eWxlcy5Cb2xkOyBicmVhazsNCgkJCQkJCWNhc2UgRm9udFN0eWxlLkl0YWxpYzogc3R5bGVzIHw9IEZvbnRTdHlsZXMuSXRhbGljOyBicmVhazsNCgkJCQkJCWNhc2UgRm9udFN0eWxlLkJvbGRBbmRJdGFsaWM6IHN0eWxlcyB8PSBGb250U3R5bGVzLkJvbGQgfCBGb250U3R5bGVzLkl0YWxpYzsgYnJlYWs7DQoJCQkJCX0NCgkJCQkJVE1QX0NoYXJhY3RlciBjaHIgPSBUTVBfRm9udEFzc2V0VXRpbGl0aWVzLkdldENoYXJhY3RlckZyb21Gb250QXNzZXQoKHVpbnQpYy5jaGFyYWN0ZXIsIG1fRm9udCwgdHJ1ZSwgc3R5bGVzLCBGb250V2VpZ2h0LlJlZ3VsYXIsIG91dCBib29sIHR0dHQpOw0KCQkJCQlpZiAoY2hyID09IG51bGwpIHsgYy5zdWNjZXNzID0gZmFsc2U7IHJldCA9IGZhbHNlOyBjb250aW51ZTsgfQ0KCQkJCQljLnN1Y2Nlc3MgPSB0cnVlOw0KCQkJCQlDaGFyYWN0ZXJJbmZvIGNpID0gbmV3IENoYXJhY3RlckluZm8oKTsNCgkJCQkJZmxvYXQgc2NhbGUgPSBjLnNpemUgLyAoZmxvYXQpbV9Gb250LmZhY2VJbmZvLnBvaW50U2l6ZSAqIG1fRm9udC5mYWNlSW5mby5zY2FsZTsNCgkJCQkJZmxvYXQgY3NjYWxlID0gY2hyLnNjYWxlICogc2NhbGU7DQoJCQkJCUdseXBoTWV0cmljcyBtZXRyaWNzID0gY2hyLmdseXBoLm1ldHJpY3M7DQoJCQkJCWludCB4ID0gY3g7DQoJCQkJCWludCB5ID0gY3k7DQoJCQkJCWludCBhZHZhbmNlID0gTWF0aGYuQ2VpbFRvSW50KG1ldHJpY3MuaG9yaXpvbnRhbEFkdmFuY2UgKiBzY2FsZSk7DQoJCQkJCWNpLmFkdmFuY2UgPSBhZHZhbmNlOw0KCQkJCQljeCArPSBNYXRoZi5DZWlsVG9JbnQobWV0cmljcy53aWR0aCAqIGNzY2FsZSkgKyBwYWRkaW5nOw0KCQkJCQlpZiAoY3ggPiB0dykgew0KCQkJCQkJY3ggPSBhZHZhbmNlICsgcGFkZGluZzsNCgkJCQkJCWN5ICs9IGxpbmVoZWlnaHQgKyBwYWRkaW5nOw0KCQkJCQkJeCA9IHBhZGRpbmc7DQoJCQkJCQl5ID0gY3k7DQoJCQkJCQlsaW5laGVpZ2h0ID0gMDsNCgkJCQkJfQ0KCQkJCQlpbnQgdmkgPSBzX3ZlcnRzLkNvdW50Ow0KCQkJCQlmbG9hdCBsZWZ0ID0geDsNCgkJCQkJZmxvYXQgcmlnaHQgPSBsZWZ0ICsgbWV0cmljcy53aWR0aCAqIGNzY2FsZTsNCgkJCQkJZmxvYXQgYm90dG9tID0geTsNCgkJCQkJZmxvYXQgdG9wID0gYm90dG9tICsgbWV0cmljcy5oZWlnaHQgKiBjc2NhbGU7DQoJCQkJCWxpbmVoZWlnaHQgPSBNYXRoZi5NYXgobGluZWhlaWdodCwgTWF0aGYuQ2VpbFRvSW50KG1ldHJpY3MuaGVpZ2h0ICogY3NjYWxlKSk7DQoJCQkJCXNfdmVydHMuQWRkKG5ldyBWZWN0b3IzKGxlZnQsIGJvdHRvbSwgMGYpKTsNCgkJCQkJc192ZXJ0cy5BZGQobmV3IFZlY3RvcjMobGVmdCwgdG9wLCAwZikpOw0KCQkJCQlzX3ZlcnRzLkFkZChuZXcgVmVjdG9yMyhyaWdodCwgdG9wLCAwZikpOw0KCQkJCQlzX3ZlcnRzLkFkZChuZXcgVmVjdG9yMyhyaWdodCwgYm90dG9tLCAwZikpOw0KCQkJCQlHbHlwaFJlY3QgcmVjdCA9IGNoci5nbHlwaC5nbHlwaFJlY3Q7DQoJCQkJCVZlY3RvcjIgdHMgPSBzX3RlbXBfYXRsYXNfc2l6ZVtjaHIuZ2x5cGguYXRsYXNJbmRleF07DQoJCQkJCWZsb2F0IHVNaW4gPSByZWN0LnggKiB0cy54Ow0KCQkJCQlmbG9hdCB2TWluID0gcmVjdC55ICogdHMueTsNCgkJCQkJZmxvYXQgdU1heCA9IHVNaW4gKyByZWN0LndpZHRoICogdHMueDsNCgkJCQkJZmxvYXQgdk1heCA9IHZNaW4gKyByZWN0LmhlaWdodCAqIHRzLnk7DQoJCQkJCXNfdXYxcy5BZGQobmV3IFZlY3RvcjIodU1pbiwgdk1pbikpOw0KCQkJCQlzX3V2MXMuQWRkKG5ldyBWZWN0b3IyKHVNaW4sIHZNYXgpKTsNCgkJCQkJc191djFzLkFkZChuZXcgVmVjdG9yMih1TWF4LCB2TWF4KSk7DQoJCQkJCXNfdXYxcy5BZGQobmV3IFZlY3RvcjIodU1heCwgdk1pbikpOw0KCQkJCQlzX3V2MnMuQWRkKFZlY3RvcjIub25lKTsNCgkJCQkJc191djJzLkFkZChWZWN0b3IyLm9uZSk7DQoJCQkJCXNfdXYycy5BZGQoVmVjdG9yMi5vbmUpOw0KCQkJCQlzX3V2MnMuQWRkKFZlY3RvcjIub25lKTsNCgkJCQkJc19jb2xvcnMuQWRkKENvbG9yLndoaXRlKTsNCgkJCQkJc19jb2xvcnMuQWRkKENvbG9yLndoaXRlKTsNCgkJCQkJc19jb2xvcnMuQWRkKENvbG9yLndoaXRlKTsNCgkJCQkJc19jb2xvcnMuQWRkKENvbG9yLndoaXRlKTsNCgkJCQkJTGlzdDxpbnQ+IHRyaWFuZ2xlcyA9IHNfdHJpYW5nbGVzW2Noci5nbHlwaC5hdGxhc0luZGV4XTsNCgkJCQkJdHJpYW5nbGVzLkFkZCh2aSk7DQoJCQkJCXRyaWFuZ2xlcy5BZGQodmkgKyAxKTsNCgkJCQkJdHJpYW5nbGVzLkFkZCh2aSArIDIpOw0KCQkJCQl0cmlhbmdsZXMuQWRkKHZpICsgMik7DQoJCQkJCXRyaWFuZ2xlcy5BZGQodmkgKyAzKTsNCgkJCQkJdHJpYW5nbGVzLkFkZCh2aSk7DQoJCQkJCWZsb2F0IG1pbnggPSBtZXRyaWNzLmhvcml6b250YWxCZWFyaW5nWCAqIGNzY2FsZTsNCgkJCQkJY2kubWluWCA9IE1hdGhmLlJvdW5kVG9JbnQobWlueCk7DQoJCQkJCWNpLm1heFggPSBNYXRoZi5Sb3VuZFRvSW50KG1pbnggKyBtZXRyaWNzLndpZHRoICogY3NjYWxlKTsNCgkJCQkJZmxvYXQgbWF4eSA9IG1fRm9udC5mYWNlSW5mby5iYXNlbGluZSAqIHNjYWxlICsgbWV0cmljcy5ob3Jpem9udGFsQmVhcmluZ1kgKiBjc2NhbGU7DQoJCQkJCWNpLm1heFkgPSBNYXRoZi5Sb3VuZFRvSW50KG1heHkpOw0KCQkJCQljaS5taW5ZID0gTWF0aGYuUm91bmRUb0ludChtYXh5IC0gbWV0cmljcy5oZWlnaHQgKiBjc2NhbGUpOw0KCQkJCQlmbG9hdCB1dmxlZnQgPSBsZWZ0ICogX3R3Ow0KCQkJCQlmbG9hdCB1dnJpZ2h0ID0gcmlnaHQgKiBfdHc7DQoJCQkJCWZsb2F0IHV2Ym90dG9tID0gYm90dG9tICogX3RoOw0KCQkJCQlmbG9hdCB1dnRvcCA9IHRvcCAqIF90aDsNCgkJCQkJY2kudXZCb3R0b21MZWZ0ID0gbmV3IFZlY3RvcjIodXZsZWZ0LCB1dmJvdHRvbSk7DQoJCQkJCWNpLnV2VG9wTGVmdCA9IG5ldyBWZWN0b3IyKHV2bGVmdCwgdXZ0b3ApOw0KCQkJCQljaS51dlRvcFJpZ2h0ID0gbmV3IFZlY3RvcjIodXZyaWdodCwgdXZ0b3ApOw0KCQkJCQljaS51dkJvdHRvbVJpZ2h0ID0gbmV3IFZlY3RvcjIodXZyaWdodCwgdXZib3R0b20pOw0KCQkJCQljLmluZm8gPSBjaTsNCgkJCQl9DQoJCQkJaWYgKGN5ICsgbGluZWhlaWdodCArIHBhZGRpbmcgPD0gdGgpIHsgYnJlYWs7IH0NCgkJCQlpZiAodHcgPiB0aCkgew0KCQkJCQl0aCArPSB0aDsNCgkJCQl9IGVsc2Ugew0KCQkJCQl0dyArPSB0dzsNCgkJCQl9DQoJCQl9DQoJCQlpZiAoc19tZXNoID09IG51bGwgfHwgc19tZXNoLkVxdWFscyhudWxsKSkgew0KCQkJCXNfbWVzaCA9IG5ldyBNZXNoKCk7DQoJCQl9DQoJCQlzX21lc2guQ2xlYXIoKTsNCgkJCXNfbWVzaC5TZXRWZXJ0aWNlcyhzX3ZlcnRzKTsNCgkJCXNfbWVzaC5TZXRVVnMoMCwgc191djFzKTsNCgkJCXNfbWVzaC5TZXRVVnMoMSwgc191djJzKTsNCgkJCXNfbWVzaC5TZXRDb2xvcnMoc19jb2xvcnMpOw0KCQkJc19tZXNoLnN1Yk1lc2hDb3VudCA9IGF0bGFzLkxlbmd0aDsNCgkJCWZvciAoaW50IGkgPSAwOyBpIDwgYXRsYXMuTGVuZ3RoOyBpKyspIHsNCgkJCQlzX21lc2guU2V0VHJpYW5nbGVzKHNfdHJpYW5nbGVzW2ldLCBpKTsNCgkJCX0NCgkJCWlmIChtX1RleHR1cmUgIT0gbnVsbCAmJiAobV9UZXh0dXJlLndpZHRoICE9IHR3IHx8IG1fVGV4dHVyZS5oZWlnaHQgIT0gdGgpKSB7DQoJCQkJUmVuZGVyVGV4dHVyZS5SZWxlYXNlVGVtcG9yYXJ5KG1fVGV4dHVyZSk7DQoJCQkJbV9UZXh0dXJlID0gbnVsbDsNCgkJCX0NCgkJCWlmIChtX1RleHR1cmUgPT0gbnVsbCkgew0KCQkJCVJlbmRlclRleHR1cmVEZXNjcmlwdG9yIGRlc2MgPSBuZXcgUmVuZGVyVGV4dHVyZURlc2NyaXB0b3IodHcsIHRoLCBSZW5kZXJUZXh0dXJlRm9ybWF0LkFSR0IzMiwgMCwgMCk7DQoJCQkJZGVzYy5zUkdCID0gdHJ1ZTsNCgkJCQltX1RleHR1cmUgPSBSZW5kZXJUZXh0dXJlLkdldFRlbXBvcmFyeShkZXNjKTsNCgkJCX0NCgkJCWlmICghbV9UZXh0dXJlLklzQ3JlYXRlZCgpKSB7IG1fVGV4dHVyZS5DcmVhdGUoKTsgfQ0KCQkJaWYgKHNfY21kX2J1ZmZlciA9PSBudWxsKSB7IHNfY21kX2J1ZmZlciA9IG5ldyBDb21tYW5kQnVmZmVyKCk7IH0NCgkJCXNfY21kX2J1ZmZlci5DbGVhcigpOw0KCQkJc19jbWRfYnVmZmVyLlNldFJlbmRlclRhcmdldChtX1RleHR1cmUpOw0KCQkJc19jbWRfYnVmZmVyLkNsZWFyUmVuZGVyVGFyZ2V0KHRydWUsIHRydWUsIENvbG9yLmNsZWFyKTsNCgkJCXNfY21kX2J1ZmZlci5TZXRWaWV3TWF0cml4KE1hdHJpeDR4NC5pZGVudGl0eSk7DQoJCQlNYXRyaXg0eDQgcHJvaiA9IE1hdHJpeDR4NC5PcnRobygwZiwgdHcsIDBmLCB0aCwgLTFmLCAxZik7DQoJCQlzX2NtZF9idWZmZXIuU2V0UHJvamVjdGlvbk1hdHJpeChwcm9qKTsNCgkJCXNfY21kX2J1ZmZlci5TZXRWaWV3cG9ydChuZXcgUmVjdCgwZiwgMGYsIHR3LCB0aCkpOw0KCQkJZm9yIChpbnQgaSA9IDA7IGkgPCBhdGxhcy5MZW5ndGg7IGkrKykgew0KCQkJCU1hdGVyaWFsUHJvcGVydHlCbG9jayBibG9jayA9IHNfcHJvcGVydHlibG9ja3NbaV07DQoJCQkJYmxvY2suU2V0VGV4dHVyZShTaGFkZXJVdGlsaXRpZXMuSURfTWFpblRleCwgYXRsYXNbaV0pOw0KCQkJCXNfY21kX2J1ZmZlci5EcmF3TWVzaChzX21lc2gsIE1hdHJpeDR4NC5pZGVudGl0eSwgbV9Gb250Lm1hdGVyaWFsLCBpLCAwLCBibG9jayk7DQoJCQl9DQoJCQlHcmFwaGljcy5FeGVjdXRlQ29tbWFuZEJ1ZmZlcihzX2NtZF9idWZmZXIpOw0KCQkJcmV0dXJuIHJldDsNCgkJfQ0KCX0NCg0KfQ0K";

		[MenuItem("Tools/Great Art Text/Generate Font Support for TMP", false)]
		public static void DoGenerate() {
			string path = EditorUtility.SaveFolderPanel("Save Font Support for TMP", "Assets", null);
			if (!path.StartsWith(Application.dataPath)) {
				EditorUtility.DisplayDialog("Save Font Support for TMP Failed", "You should select a folder that is in 'Assets' directory !", "OK");
				return;
			}
			path = path + "/TMPFontAssetForGreatArtText.cs";
			byte[] bytes = Convert.FromBase64String(CODE);
			File.WriteAllBytes(path, bytes);
			AssetDatabase.Refresh();
		}

	}

}
